{
  "id": "d034140a-5290-4630-9906-6022d1497d35",
  "prefix": "buildpushthuhochuyentienviettelpay",
  "description": "Build push thu chuyển tiền ViettelPay",
  "body": "INSERT INTO dbo.CRM_POS_COLLECTION_ON_BEHALF_PUSH\n    (\n         CRMID\n       , CRMCode\n       , VendorCode\n       , TotalAmount\n       , Fee\n       , CreateDate\n       , U_ShpCod\n       , U_CrdCod\n       , U_EplCod\n       , U_Desc\n       , U_MoCash\n       , U_MoCCad\n       , U_Acbank\n       , U_CTLKCode\n       , U_TypCre\n       , U_NumCre\n       , U_MoVoCh\n       , U_NumVch\n       , U_NaVoch\n       , U_AcVoch\n       , U_MoTran\n       , U_BankTs\n       , U_AccNum\n       , U_AccName\n       , IsAutoCard\n       , Card_Fee\n       , CardFeeTM\n       , LongChauShopCode\n       , UpdatedDate\n       , PushStatus\n       , POSMsg\n       , POSORCT\n       , MaChuanChi\n       , SplitFee\n       , SplitFeeType\n       , mPOSDocNum\n       , Status\n       , ServiceName\n       , ReceiverPersionID\n       , SenderPersionID\n       , Phone\n    )\nSELECT\n      P.ID\n\t, CONVERT(VARCHAR, P.ID)\n\t, CASE WHEN P.Pay_Type = 1 THEN N'0049' WHEN P.Pay_Type = 3 THEN N'0041' END\n\t, P.U_Tmoney\n\t, P.U_Fee\n\t, P.CreateDate\n\t, P.From_ShopCode\n\t, 0\n\t, ''\n\t, ''\n\t, O.CashAmount\n\t, O.CardAmount\n\t, O.CardPaymentMethod\n\t, O.U_CTLKCode\n\t, O.CreditCardType\n\t, O.CreditCardNumber\n\t, O.VoucherAmount\n\t, O.VoucherNumber\n\t, O.VoucherName\n\t, O.VoucherAccount\n\t, O.TransferAmount\n\t, O.BankCode\n\t, O.BankAccountNumber\n\t, O.BankAccountName\n\t, 'N'\n\t, 0\n\t, 0\n\t, ''\n\t, NULL\n\t, 1\n\t, NULL\n\t, NULL\n\t, O.CreditCardNumber\n\t, 0\n\t, 0\n\t, P.Mpos_ID\n\t, P.U_status\n\t, CASE WHEN P.Pay_Type = 1 THEN N'Chuyển tiền ViettelPay' WHEN P.Pay_Type = 3 THEN N'Nạp tiền' END\n\t, P.CardID_Receiver\n\t, P.CardID_Sender\n\t, P.U_Phone_Sender\nFROM\n    dbo.Pay_Services P (NOLOCK)\n\t\tINNER JOIN dbo.ORCT O (NOLOCK)\n\t\t\tON P.ID = O.DocEntry\n\t\t\t\tAND O.U_Type = P.Pay_Type\nWHERE\n    P.ID IN ($CURSOR$)\n    AND P.Pay_Type = 1"
}